<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>taiwanlottery</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>

        function lotteryLogic() {

            document.getElementById("demo").innerHTML += '<b>樂透彩結果</b><br>'

            let min = 1;
            let max = 49;
            let arr = [];
            let num = 0;

            // 產生亂數值存入 arr
            while (num < max) {
                let randomResult = getRandom(min, max);

                if (arr.indexOf(randomResult) === -1) {
                    arr.push(randomResult);
                    num++;
                }
            }

            // 輸出結果
            let currentIdx = 0;
            for (let i = 0; i < arr.length; i += 6) {

                currentIdx += 1;

                // 輸出內容
                let resultBody = arr.slice(i, i + 6).sort((a, b) => a - b);

                // 輸出標題
                let resultTitle = resultBody.length === 6 ? '第' + currentIdx + '組 = ' : '餘' + resultBody.length + '碼 = ';

                // 左補0
                resultBody = resultBody.map(item => checkNum(item));

                document.getElementById("demo").innerHTML += resultTitle;
                document.getElementById("demo").innerHTML += resultBody;
                document.getElementById("demo").innerHTML += "<br>"
            }
        }

        function superLotteryLogic() {

            document.getElementById("demo").innerHTML += '<b>威力彩結果</b><br>'

            let min = 1;
            let max = 36;
            let arr = [];
            let num = 0;
            let bArr = [];

            // 產生亂數值存入 arr
            while (num < max) {
                let randomResult = getRandom(min, max);

                if (arr.indexOf(randomResult) === -1) {
                    arr.push(randomResult);
                    num++;
                }
            }

            // 產生B區值
            let createBValue = function (aArr, currentIdx, cb) {
                let randomResult = getRandom(min, max);

                if (aArr.indexOf(randomResult) === -1 && bArr.indexOf(randomResult) === -1) {
                    bArr.push(randomResult);
                    cb(aArr, currentIdx, randomResult);
                } else {
                    createBValue(aArr, currentIdx, cb)
                }
            }

            let callback = function (resultBody, currentIdx, bValue) {

                // 輸出標題
                let resultTitle = resultBody.length === 6 ? '第' + currentIdx + '組 = ' : '餘' + resultBody.length + '碼 = ';

                // 左補0
                resultBody = resultBody.map(item => checkNum(item));

                document.getElementById("demo").innerHTML += resultTitle;
                document.getElementById("demo").innerHTML += 'A區 ' + resultBody + ' B區 ' + checkNum(bValue) + ' ';
                document.getElementById("demo").innerHTML += "<br>"
            }

            // 輸出結果
            let currentIdx = 0;
            for (let i = 0; i < arr.length; i += 6) {

                currentIdx += 1;

                // 輸出內容
                let resultBody = arr.slice(i, i + 6).sort((a, b) => a - b);

                // 產生B區值,輸出資料轉至callback執行
                createBValue(resultBody, currentIdx, callback);
            }
        }

        function exec() {
            document.getElementById("demo").innerHTML = '';
            lotteryLogic();
            superLotteryLogic();
        }

        function getRandom(min, max) {
            return Math.floor(Math.random() * max) + min;
        };

        function startTime() {
            var today = new Date();
            var hh = checkNum(today.getHours());
            var mm = checkNum(today.getMinutes());
            var ss = checkNum(today.getSeconds());
            document.getElementById('clock').innerHTML = hh + ":" + mm + ":" + ss;
            setTimeout(startTime, 500);
        }

        function checkNum(i) {
            if (i < 10) i = "0" + i;
            return i;
        }

        window.onload = function () {
            startTime();
            exec();
        }
    </script>
    <style>
        body {
            font-size: 1.4em;
        }
        p {
            margin: 0;
        }
    </style>
</head>
<body>
    <div>
        <table>
            <tr>
                <td>
                <button type="button" onclick="exec()">產生彩號(<span id="clock"></span>)</button>
                </td>
            </tr>
        </table>
    </div>
    <hr />
    <p id="demo"></p>
</body>
</html>